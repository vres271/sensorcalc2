<br>
<div class="container">
	<h3>Main</h3>
	<form class="form-horizontal" action="">
		<div class="row">
			<div class="col-sm-6">
			    <div class="form-group">
			      <label class="control-label col-sm-3" for="nm">Unit Name:</label>
			      <div class="col-sm-9">
			        <input ng-model="item.nm" type="text" class="form-control" id="nm" placeholder="" name="nm">
			      </div>
			    </div>
			    <div class="form-group">
			      <label class="control-label col-sm-3" for="uid">Uniq ID:</label>
			      <div class="col-sm-9">
			        <input ng-model="item.uid" type="text" class="form-control" id="uid" placeholder="" name="uid">
			      </div>
			    </div>
			    <div class="form-group">
			      <label class="control-label col-sm-3" for="ph">Phone:</label>
			      <div class="col-sm-9">
			        <input ng-model="item.ph" type="text" class="form-control" id="ph" placeholder="" name="ph">
			      </div>
			    </div>
			    <div class="form-group">
			      <label class="control-label col-sm-3" for="hw">Hardware Type:</label>
			      <div class="col-sm-9">
		    		<select ng-model="item.hw" ng-options="type.id as type.name for type in hwtypes.items | orderBy : 'name'" class="form-control"  id="hw" name="hw"></select>
			      </div>
			    </div>
			    <div class="form-group">
			      <label class="control-label col-sm-3" for="psw">Password:</label>
			      <div class="col-sm-9">
			        <input ng-model="item.psw" type="text" class="form-control" id="psw" placeholder="" name="psw">
			      </div>
			    </div>
			</div>
			<div class="col-sm-6 text-center">
				<p>Last Message: {{(now.ut-short_item.lmsg.t) | UTtoTime}}</p>
				<div class="lmsg-indicator {{blink ? 'blink' : ''}} {{['green','red'][1*((now.ut-short_item.lmsg.t)>420)]}}" ></div>
				<p>Speed: {{short_item.lmsg.pos.s}} km/h</p>
				<p>
					<a ng-if="short_item.lmsg.pos.y" target="_blank" href="{{'https://yandex.ru/maps/11147/engels/?text='+short_item.lmsg.pos.y+','+short_item.lmsg.pos.x}}">{{short_item.lmsg.pos.y}},{{short_item.lmsg.pos.x}} </a>
					<span  ng-if="short_item.lmsg.pos.sc">({{short_item.lmsg.pos.sc}})</span>
					<span  ng-if="short_item.lmsg.pos.sc===undefined || !short_item.lmsg.pos.y">No data</span>
				</p>
				<button class="btn btn-default" type="button" ng-click="saveItem();"><i class="fa fa-save"></i> Save changes</button>
			</div>
		</div>
	</form>
</div>
<div class="container">
	<div >
		<h3>Sensors</h3>
		<table class="table">
			<tbody>
				<tr ng-repeat-start="sensor in item.sens" ng-class="sensor._deleted ? 'danger' : ''">
					<td>{{$index+1}}</td>
					<td>
						<a ng-if="sensor_id !== sensor.id" href="" ng-href="#/unit/{{id}}/sensor/{{sensor.id}}" ng-click="goto(sensor.id)">{{sensor.n}}</a>
						<a ng-if="sensor_id === sensor.id" href="" ng-href="#/unit/{{id}}" ng-click="goto()">{{sensor.n}}</a>
					</td>
					<td>{{sensor.t}}</td>
					<td>{{sensor.p}}</td>
					<td>{{short_item.lmsg.p[sensor.p]}}</td>
					<td>{{sensor | ParamToSensorValue : short_item.lmsg}}</td>
					<td>{{sensor.m}}</td>
					<td><a href="" ng-click="sensor._deleted = !sensor._deleted" title="Delete Sensor"><i class="fa fa-remove red"></i></a></td>
				</tr>
				<tr ng-hide="1*sensor.id !== 1*sensor_id" ng-repeat-end>
					<td colspan="100" ng-include="'html/views/unit.sensor-form.html'" scope="" onload=""></td>
				</tr>
			</tbody>
		</table>
	</div>
	<div class="row">
		<div class="col-md-6 col-md-offset-3">
			<button type="button" class="btn btn-default btn-block"><i class="fa fa-plus"></i> Create new Sensor</button>
		</div>
	</div>
	<br>
	<br>
	<br>
</div>