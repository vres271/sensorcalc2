<nav class="navbar navbar-fluide navbar-fixed-top" style="margin-top: 50px; background: white;">
	<div class="container">
		<form action="" class="navbar-form ">
			<div class="row">
				<div class="col-sm-12"><h4>{{unit.nm}} : {{unit.uid}} : {{unit.ph}}</h4></div>
			</div>
			<div class="form-group">
				<input ng-model="s.timeFrom" class="form-control" type="datetime-local" name="" placeholder="yyyy-MM-ddTHH:mm:ss"  >
			</div>
			<div class="form-group">
				<input ng-model="s.timeTo" class="form-control" type="datetime-local" name="" placeholder="yyyy-MM-ddTHH:mm:ss"  >
			</div>
			<div class="form-group">
				<button type="button" class=" btn btn-default" ng-click="getMessages()">Load</button>
			</div>
			<div class="form-group">
				<input ng-change="filterCols();" ng-model="s.filter.params" class="form-control" type="type" name="" placeholder="Param name"  >
			</div>
			<div class="form-group navbar-right ">
				Start: 
				<a href="" ng-click="shift(0)" class="btn btn-default"><i class="fa fa-fast-backward" aria-hidden="true"></i></a> 
				<a href="" ng-click="shift(-1)" class="btn btn-default"><i class="fa fa-chevron-left"></i></a> 
				{{s.limitfrom}} 
				<a href="" ng-click="shift(1)" class="btn btn-default"><i class="fa fa-chevron-right"></i></a>
				limit to <select ng-model="s.limitto" ng-options="value for value in [25,50,100,200,400]"  ng-change=" onLimitChange();" class="form-control" name="" placeholder="Limit" id="limitto"></select>
			</div>
		</form>
	</div>
</nav>
<br><br><br><br>
<div ng-if="messages.error"  class="container"  >
	<br>
	<div class="alert alert-danger alert-dismissable" >
		<button class="close" data-dismiss="alert"><i class="fa fa-times"></i></button>
			<h4>Error</h4>
			<p>{{werrors[messages.error]}}</p>
		</p>
	</div>
</div>
<div class="container" ng-hide="isEmptyObject(chart_keys)" >
	<div  style="height: 300px;">
	    <linechart data="mdata" options="chart_messages_options"></linechart>
	</div>
	<div class="row">
		<div class="col-sm-4 col-md-offset-8 text-right">
			<a href="" ng-click="chart_keys = {}" class="btn btn-default"><i class="fa fa-close"></i> Close Chart</a>
		</div>
	</div>
</div>
<br>
<div class="container">
	<div class="table-responsive">
		<table class="table table-striped table-sm example-animate-container" id="items-table">
			<thead>
                <tr>
                  <th width="30px">#</th>
                  <th width="200px">Datetime</th>
                  <th width="30px">XY</th>
                  <th  width="30px"><a href="" ng-click="createChart('_pos_s');">V</a></th>
                  <th  ng-hide="hide_cols[key] || $index<8"  ng-repeat="(key, value) in messages.items[0] ">
                  	<a href="" ng-click="createChart(key);">
                  		<i ng-if="chart_keys[key]" class="fa fa-line-chart" aria-hidden="true"></i>
                  		{{key.substr(3, 50)}}
                  	</a>
                  </th>
                </tr>
          	</thead>
          	<tbody>
				<tr ng-repeat="item in messages.items | orderBy: ['-__t']  | limitTo: s.limitto : s.limitfrom  as items_result" class="item-row animate-repeat">
					<td >{{item.__i}}</td>
					<td >{{item.__t*1000 | date : 'yy.MM.dd_HH:mm:ss'}}</td>
					<td class="text-nowrap"><a href="" ng-if="item._pos_x && item._pos_y"><i class="fa fa-map-marker"></i></a> <sup>{{item._pos_sc}}</sup></td>
					<td>{{item._pos_s}}</td>
					<td ng-hide="hide_cols[key] || $index<8" ng-repeat="(key, param) in item " >{{param}}</td>
				</tr>
			</tbody>
		</table>
	</div>
	<nav ng-hide="!((messages.items.length > s.limitto)&&(items_result.length === s.limitto))" class="text-center" id="paginator">
		<ul class="pagination">
			<li><a href="" ng-click="s.limitto = s.limitto + s.limitto; onLimitChange();">Ещё {{s.limitto}} строк<br><i class="fa fa-chevron-down"></a></i></li>
		</ul>
	</nav>
	<br>
</div>